"use client";
import { motion, useInView } from "framer-motion";
import { useRef } from "react";

const Feature3SvgComponent = () => {
  const ref = useRef<SVGGElement>(null);
  const isInView = useInView(ref, { once: false, amount: 0.3 });

  const containerVariants = {
    hidden: { opacity: 0 },
    visible: {
      opacity: 1,
      transition: {
        duration: 0.8,
        staggerChildren: 0.2,
      },
    },
  };

  const shapeVariants = {
    hidden: { opacity: 0, scale: 0.9 },
    visible: {
      opacity: 1,
      scale: 1,
      transition: {
        duration: 1,
        ease: "easeOut",
      },
    },
  };

  const pulseAnimation = {
    scale: [1, 0.95, 1],
    transition: {
      duration: 2,
      repeat: Infinity,
      repeatType: "reverse",
      ease: "easeInOut",
      delay: 1.5,
    },
  };

  const dashedLineVariants = {
    hidden: { opacity: 0, pathLength: 0 },
    visible: {
      opacity: 1,
      pathLength: 1,
      transition: {
        duration: 1.5,
        ease: "easeOut",
      },
    },
  };

  const chainAnimation = {
    strokeDashoffset: [0, -15.66],
    transition: {
      duration: 1,
      repeat: Infinity,
      repeatType: "loop",
      ease: "linear",
      delay: 2,
    },
  };

  return (
    <svg
      width="568"
      height="356"
      viewBox="0 0 568 356"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      preserveAspectRatio="xMidYMid meet"
      className="w-full h-auto"
    >
      <g clipPath="url(#clip0_525_777)">
        <mask
          id="mask0_525_777"
          style={{ maskType: "alpha" }}
          maskUnits="userSpaceOnUse"
          x="-67"
          y="-20"
          width="702"
          height="394"
        >
          <ellipse
            cx="284"
            cy="177.493"
            rx="350.092"
            ry="196.5"
            fill="url(#paint0_radial_525_777)"
          />
        </mask>
        <motion.g
          mask="url(#mask0_525_777)"
          variants={containerVariants}
          initial="hidden"
          animate={isInView ? "visible" : "hidden"}
          ref={ref}
        >
          <motion.path
            d="M-57.5527 86.4401V214.7C-57.5527 228.977 -57.5527 236.116 -54.7741 241.57C-52.3299 246.367 -48.4299 250.267 -43.6329 252.711C-38.1795 255.489 -31.0406 255.489 -16.7628 255.489H190.298L228.519 255.377C242.759 255.335 249.879 255.314 255.316 252.53C260.099 250.08 263.985 246.182 266.42 241.392C269.189 235.947 269.189 228.827 269.189 214.587V119.971C269.189 111.979 269.189 107.983 268.086 104.356C267.11 101.146 265.51 98.16 263.377 95.5694C260.968 92.6432 257.64 90.4305 250.985 86.0051L200.56 52.4741L200.56 52.474C196.745 49.9376 194.838 48.6693 192.775 47.7709C190.944 46.9735 189.026 46.3939 187.06 46.0442C184.845 45.6501 182.555 45.6501 177.974 45.6501H-16.7628C-31.0406 45.6501 -38.1795 45.6501 -43.6329 48.4288C-48.4299 50.873 -52.3299 54.773 -54.7741 59.57C-57.5527 65.0234 -57.5527 72.1623 -57.5527 86.4401Z"
            fill="url(#paint1_linear_525_777)"
            fillOpacity="0.05"
            style={{ mixBlendMode: "luminosity" }}

            // @ts-ignore
            variants={shapeVariants}
            // @ts-ignore
            animate={pulseAnimation}
          />
          <motion.path
            d="M-57.5527 86.4401V214.7C-57.5527 228.977 -57.5527 236.116 -54.7741 241.57C-52.3299 246.367 -48.4299 250.267 -43.6329 252.711C-38.1795 255.489 -31.0406 255.489 -16.7628 255.489H190.298L228.519 255.377C242.759 255.335 249.879 255.314 255.316 252.53C260.099 250.08 263.985 246.182 266.42 241.392C269.189 235.947 269.189 228.827 269.189 214.587V119.971C269.189 111.979 269.189 107.983 268.086 104.356C267.11 101.146 265.51 98.16 263.377 95.5694C260.968 92.6432 257.64 90.4305 250.985 86.0051L200.56 52.4741L200.56 52.474C196.745 49.9376 194.838 48.6693 192.775 47.7709C190.944 46.9735 189.026 46.3939 187.06 46.0442C184.845 45.6501 182.555 45.6501 177.974 45.6501H-16.7628C-31.0406 45.6501 -38.1795 45.6501 -43.6329 48.4288C-48.4299 50.873 -52.3299 54.773 -54.7741 59.57C-57.5527 65.0234 -57.5527 72.1623 -57.5527 86.4401Z"
            stroke="url(#paint2_linear_525_777)"
            strokeOpacity="0.25"
            strokeWidth="2.39004"

            // @ts-ignore
            variants={shapeVariants}
            // @ts-ignore
            animate={pulseAnimation}
          />
          <motion.path
            d="M185.192 -117.706L194.611 14.5681C195.12 21.7228 195.375 25.3001 196.517 28.5403C197.529 31.4108 199.047 34.0768 200.999 36.4122C203.203 39.0482 206.149 41.0929 212.042 45.1823L212.042 45.1824L262.502 80.1995C268.302 84.2248 271.203 86.2375 274.392 87.3749C277.218 88.3826 280.2 88.8837 283.2 88.8549C286.586 88.8225 289.984 87.8683 296.782 85.96L337.293 74.5875C339.323 74.0175 340.338 73.7325 341.37 73.5327C342.286 73.3552 343.211 73.2282 344.142 73.1522C345.189 73.0666 346.243 73.0675 348.352 73.0693L466.857 73.1702C481.026 73.1823 488.11 73.1883 493.542 70.4438C498.321 68.0294 502.218 64.1717 504.681 59.418C507.481 54.0142 507.547 46.9304 507.68 32.7628L508.152 -17.5529C508.242 -27.1592 508.287 -31.9623 506.815 -36.1685C505.513 -39.8866 503.368 -43.2524 500.547 -46.0018C497.355 -49.1124 492.982 -51.0991 484.236 -55.0726L258.247 -157.74C255.245 -159.104 253.745 -159.785 252.184 -160.266C250.798 -160.692 249.378 -161 247.939 -161.185C246.32 -161.393 244.671 -161.393 241.375 -161.393H225.879C210.657 -161.393 203.046 -161.393 197.399 -158.362C192.437 -155.699 188.496 -151.468 186.192 -146.329C183.571 -140.481 184.111 -132.889 185.192 -117.706Z"
            fill="url(#paint3_linear_525_777)"
            fillOpacity="0.05"
            style={{ mixBlendMode: "luminosity" }}

            // @ts-ignore
            variants={shapeVariants}
            // @ts-ignore
            animate={pulseAnimation}
          />
          <motion.path
            d="M185.192 -117.706L194.611 14.5681C195.12 21.7228 195.375 25.3001 196.517 28.5403C197.529 31.4108 199.047 34.0768 200.999 36.4122C203.203 39.0482 206.149 41.0929 212.042 45.1823L212.042 45.1824L262.502 80.1995C268.302 84.2248 271.203 86.2375 274.392 87.3749C277.218 88.3826 280.2 88.8837 283.2 88.8549C286.586 88.8225 289.984 87.8683 296.782 85.96L337.293 74.5875C339.323 74.0175 340.338 73.7325 341.37 73.5327C342.286 73.3552 343.211 73.2282 344.142 73.1522C345.189 73.0666 346.243 73.0675 348.352 73.0693L466.857 73.1702C481.026 73.1823 488.11 73.1883 493.542 70.4438C498.321 68.0294 502.218 64.1717 504.681 59.418C507.481 54.0142 507.547 46.9304 507.68 32.7628L508.152 -17.5529C508.242 -27.1592 508.287 -31.9623 506.815 -36.1685C505.513 -39.8866 503.368 -43.2524 500.547 -46.0018C497.355 -49.1124 492.982 -51.0991 484.236 -55.0726L258.247 -157.74C255.245 -159.104 253.745 -159.785 252.184 -160.266C250.798 -160.692 249.378 -161 247.939 -161.185C246.32 -161.393 244.671 -161.393 241.375 -161.393H225.879C210.657 -161.393 203.046 -161.393 197.399 -158.362C192.437 -155.699 188.496 -151.468 186.192 -146.329C183.571 -140.481 184.111 -132.889 185.192 -117.706Z"
            stroke="url(#paint4_linear_525_777)"
            strokeOpacity="0.25"
            strokeWidth="2.39004"

            // @ts-ignore
            variants={shapeVariants}
            // @ts-ignore
            animate={pulseAnimation}
          />
          <motion.path
            d="M75.5691 421.135L294.249 421.135C307.244 421.135 313.741 421.135 318.901 418.705C323.445 416.564 327.256 413.129 329.855 408.83C332.806 403.949 333.477 397.486 334.82 384.561L340.358 331.274C341.317 322.047 341.796 317.433 340.8 313.225C339.919 309.505 338.212 306.03 335.807 303.058C333.086 299.698 329.142 297.256 321.254 292.374L284.778 269.798L284.778 269.798C281.108 267.526 279.273 266.39 277.306 265.587C275.561 264.873 273.741 264.356 271.881 264.044C269.786 263.692 267.628 263.692 263.311 263.692L227.995 263.692L127.326 263.692C120.523 263.692 117.121 263.692 113.955 264.518C111.149 265.251 108.489 266.457 106.088 268.084C103.38 269.92 101.138 272.478 96.653 277.594L96.6529 277.594L44.8956 336.638C41.1523 340.908 39.2806 343.043 37.9467 345.463C36.7635 347.609 35.8961 349.915 35.371 352.309C34.7791 355.008 34.7791 357.847 34.7791 363.526L34.7791 380.345C34.7791 394.623 34.7791 401.762 37.5577 407.215C40.0019 412.012 43.9019 415.912 48.6989 418.356C54.1523 421.135 61.2912 421.135 75.5691 421.135Z"
            fill="url(#paint5_linear_525_777)"
            fillOpacity="0.05"
            style={{ mixBlendMode: "luminosity" }}

            // @ts-ignore
            variants={shapeVariants}
            // @ts-ignore
            animate={pulseAnimation}
          />
          <motion.path
            d="M75.5691 421.135L294.249 421.135C307.244 421.135 313.741 421.135 318.901 418.705C323.445 416.564 327.256 413.129 329.855 408.83C332.806 403.949 333.477 397.486 334.82 384.561L340.358 331.274C341.317 322.047 341.796 317.433 340.8 313.225C339.919 309.505 338.212 306.03 335.807 303.058C333.086 299.698 329.142 297.256 321.254 292.374L284.778 269.798L284.778 269.798C281.108 267.526 279.273 266.39 277.306 265.587C275.561 264.873 273.741 264.356 271.881 264.044C269.786 263.692 267.628 263.692 263.311 263.692L227.995 263.692L127.326 263.692C120.523 263.692 117.121 263.692 113.955 264.518C111.149 265.251 108.489 266.457 106.088 268.084C103.38 269.92 101.138 272.478 96.653 277.594L96.6529 277.594L44.8956 336.638C41.1523 340.908 39.2806 343.043 37.9467 345.463C36.7635 347.609 35.8961 349.915 35.371 352.309C34.7791 355.008 34.7791 357.847 34.7791 363.526L34.7791 380.345C34.7791 394.623 34.7791 401.762 37.5577 407.215C40.0019 412.012 43.9019 415.912 48.6989 418.356C54.1523 421.135 61.2912 421.135 75.5691 421.135Z"
            stroke="url(#paint6_linear_525_777)"
            strokeOpacity="0.25"
            strokeWidth="2.39004"

            // @ts-ignore
            variants={shapeVariants}
            // @ts-ignore
            animate={pulseAnimation}
          />
          <motion.path
            d="M399.075 421.135L619.526 421.135C631.888 421.135 638.069 421.135 643.063 418.886C647.544 416.867 651.347 413.595 654.012 409.465C656.982 404.863 657.905 398.751 659.751 386.528C662.079 371.103 663.244 363.391 661.016 357.281C659.022 351.816 655.22 347.196 650.239 344.19C644.671 340.829 636.879 340.49 621.295 339.812L536.967 336.141C532.2 335.933 529.816 335.83 527.536 335.304C525.512 334.837 523.553 334.125 521.702 333.183C519.616 332.122 517.722 330.671 513.934 327.769L513.934 327.769L488.192 308.047C484.12 304.928 482.084 303.368 479.834 302.26C477.838 301.277 475.721 300.56 473.539 300.126C471.079 299.637 468.514 299.637 463.385 299.637L399.039 299.637C384.701 299.637 377.532 299.637 372.065 302.432C367.257 304.89 363.354 308.812 360.918 313.631C358.149 319.11 358.182 326.279 358.249 340.617L358.285 348.179L358.285 380.345C358.285 394.623 358.285 401.762 361.063 407.215C363.507 412.012 367.407 415.912 372.204 418.356C377.658 421.135 384.797 421.135 399.075 421.135Z"
            fill="url(#paint7_linear_525_777)"
            fillOpacity="0.05"
            style={{ mixBlendMode: "luminosity" }}

            // @ts-ignore
            variants={shapeVariants}
            // @ts-ignore
            animate={pulseAnimation}
          />
          <motion.path
            d="M399.075 421.135L619.526 421.135C631.888 421.135 638.069 421.135 643.063 418.886C647.544 416.867 651.347 413.595 654.012 409.465C656.982 404.863 657.905 398.751 659.751 386.528C662.079 371.103 663.244 363.391 661.016 357.281C659.022 351.816 655.22 347.196 650.239 344.19C644.671 340.829 636.879 340.49 621.295 339.812L536.967 336.141C532.2 335.933 529.816 335.83 527.536 335.304C525.512 334.837 523.553 334.125 521.702 333.183C519.616 332.122 517.722 330.671 513.934 327.769L513.934 327.769L488.192 308.047C484.12 304.928 482.084 303.368 479.834 302.26C477.838 301.277 475.721 300.56 473.539 300.126C471.079 299.637 468.514 299.637 463.385 299.637L399.039 299.637C384.701 299.637 377.532 299.637 372.065 302.432C367.257 304.89 363.354 308.812 360.918 313.631C358.149 319.11 358.182 326.279 358.249 340.617L358.285 348.179L358.285 380.345C358.285 394.623 358.285 401.762 361.063 407.215C363.507 412.012 367.407 415.912 372.204 418.356C377.658 421.135 384.797 421.135 399.075 421.135Z"
            stroke="url(#paint8_linear_525_777)"
            strokeOpacity="0.25"
            strokeWidth="2.39004"

            // @ts-ignore
            variants={shapeVariants}
            // @ts-ignore
            animate={pulseAnimation}
          />
          <motion.path
            d="M466.214 125.943V247.919C466.214 261.961 466.214 268.982 463.499 274.384C461.11 279.137 457.295 283.024 452.586 285.5C447.235 288.314 440.215 288.443 426.176 288.702L358.584 289.948C354.687 290.02 352.738 290.056 350.831 289.802C349.137 289.577 347.471 289.182 345.856 288.623C344.038 287.994 342.312 287.088 338.862 285.275L299.088 264.379L299.088 264.379C291.158 260.213 287.193 258.13 284.301 255.092C281.742 252.406 279.801 249.193 278.613 245.679C277.269 241.706 277.269 237.227 277.269 228.269V135.528C277.269 124.345 277.269 118.754 279.204 114.075C280.911 109.946 283.673 106.339 287.214 103.614C291.226 100.526 296.624 99.0674 307.42 96.1505L342.898 86.5649L342.898 86.5649C344.854 86.0363 345.832 85.7721 346.824 85.5866C347.706 85.4218 348.596 85.3037 349.491 85.2328C350.497 85.1529 351.51 85.1529 353.537 85.1529H425.424C439.702 85.1529 446.841 85.1529 452.294 87.9316C457.091 90.3757 460.991 94.2758 463.435 99.0727C466.214 104.526 466.214 111.665 466.214 125.943Z"
            fill="url(#paint9_linear_525_777)"
            fillOpacity="0.05"
            style={{ mixBlendMode: "luminosity" }}

            // @ts-ignore
            variants={shapeVariants}
            // @ts-ignore
            animate={pulseAnimation}
          />
          <motion.path
            d="M466.214 125.943V247.919C466.214 261.961 466.214 268.982 463.499 274.384C461.11 279.137 457.295 283.024 452.586 285.5C447.235 288.314 440.215 288.443 426.176 288.702L358.584 289.948C354.687 290.02 352.738 290.056 350.831 289.802C349.137 289.577 347.471 289.182 345.856 288.623C344.038 287.994 342.312 287.088 338.862 285.275L299.088 264.379L299.088 264.379C291.158 260.213 287.193 258.13 284.301 255.092C281.742 252.406 279.801 249.193 278.613 245.679C277.269 241.706 277.269 237.227 277.269 228.269V135.528C277.269 124.345 277.269 118.754 279.204 114.075C280.911 109.946 283.673 106.339 287.214 103.614C291.226 100.526 296.624 99.0674 307.42 96.1505L342.898 86.5649L342.898 86.5649C344.854 86.0363 345.832 85.7721 346.824 85.5866C347.706 85.4218 348.596 85.3037 349.491 85.2328C350.497 85.1529 351.51 85.1529 353.537 85.1529H425.424C439.702 85.1529 446.841 85.1529 452.294 87.9316C457.091 90.3757 460.991 94.2758 463.435 99.0727C466.214 104.526 466.214 111.665 466.214 125.943Z"
            stroke="url(#paint10_linear_525_777)"
            strokeOpacity="0.25"

            strokeWidth="2.39004"
            // @ts-ignore
            variants={shapeVariants}
            // @ts-ignore
            animate={pulseAnimation}
          />
          <motion.path
            d="M354.323 189.666H294.335L238.17 151.513H230.893"
            stroke="white"
            strokeOpacity="0.3"
            strokeWidth="1.59336"
            strokeDasharray="6.73 6.73"  // الگوی خط‌چین: - - - - (دَشد لاین)
            whileInView={{ strokeDashoffset: [0, -13.46] }}  // انیمیشن: خط‌چین به جلو حرکت می‌کنه
            transition={{ duration: 1, repeat: Infinity, ease: 'linear' }}  // تکرار بی‌نهایت، خطی
          />
        </motion.g>
      </g>
      <defs>
        <radialGradient
          id="paint0_radial_525_777"
          cx="0"
          cy="0"
          r="1"
          gradientUnits="userSpaceOnUse"
          gradientTransform="translate(284 138.01) rotate(90) scale(217.006 645.406)"
        >
          <stop stopColor="#D9D9D9" />
          <stop offset="1" stopColor="#737373" stopOpacity="0" />
        </radialGradient>
        <linearGradient
          id="paint1_linear_525_777"
          x1="231.172"
          y1="150.57"
          x2="54.394"
          y2="130.309"
          gradientUnits="userSpaceOnUse"
        >
          <stop stopColor="#F8F8F8" />
          <stop offset="1" stopColor="#929292" stopOpacity="0" />
        </linearGradient>
        <linearGradient
          id="paint2_linear_525_777"
          x1="258.501"
          y1="178.946"
          x2="107.331"
          y2="222.393"
          gradientUnits="userSpaceOnUse"
        >
          <stop stopColor="white" stopOpacity="0.4" />
          <stop offset="0.4" stopColor="white" stopOpacity="0.01" />
          <stop offset="0.6" stopColor="white" stopOpacity="0.01" />
        </linearGradient>
        <linearGradient
          id="paint3_linear_525_777"
          x1="212.128"
          y1="108.587"
          x2="307.363"
          y2="20.2966"
          gradientUnits="userSpaceOnUse"
        >
          <stop stopColor="#F8F8F8" />
          <stop offset="1" stopColor="#929292" stopOpacity="0" />
        </linearGradient>
        <linearGradient
          id="paint4_linear_525_777"
          x1="337.947"
          y1="91.1526"
          x2="372.47"
          y2="18.3967"
          gradientUnits="userSpaceOnUse"
        >
          <stop stopColor="white" stopOpacity="0.4" />
          <stop offset="1" stopColor="white" stopOpacity="0" />
        </linearGradient>
        <linearGradient
          id="paint5_linear_525_777"
          x1="182.899"
          y1="304.405"
          x2="182.899"
          y2="421.135"
          gradientUnits="userSpaceOnUse"
        >
          <stop stopColor="#F8F8F8" />
          <stop offset="1" stopColor="#929292" stopOpacity="0" />
        </linearGradient>
        <linearGradient
          id="paint6_linear_525_777"
          x1="222.959"
          y1="275.138"
          x2="206.751"
          y2="377.326"
          gradientUnits="userSpaceOnUse"
        >
          <stop stopColor="white" stopOpacity="0.4" />
          <stop offset="0.4" stopColor="white" stopOpacity="0.01" />
          <stop offset="0.6" stopColor="white" stopOpacity="0.01" />
        </linearGradient>
        <linearGradient
          id="paint7_linear_525_777"
          x1="330.79"
          y1="261.432"
          x2="506.404"
          y2="421.135"
          gradientUnits="userSpaceOnUse"
        >
          <stop stopColor="#F8F8F8" />
          <stop offset="1" stopColor="#929292" stopOpacity="0" />
        </linearGradient>
        <linearGradient
          id="paint8_linear_525_777"
          x1="397.237"
          y1="292.1"
          x2="572.64"
          y2="412.161"
          gradientUnits="userSpaceOnUse"
        >
          <stop stopColor="white" stopOpacity="0.4" />
          <stop offset="0.765934" stopColor="white" stopOpacity="0" />
        </linearGradient>
        <linearGradient
          id="paint9_linear_525_777"
          x1="277.269"
          y1="186.559"
          x2="466.214"
          y2="186.559"
          gradientUnits="userSpaceOnUse"
        >
          <stop stopColor="#F8F8F8" />
          <stop offset="1" stopColor="#929292" stopOpacity="0" />
        </linearGradient>
        <linearGradient
          id="paint10_linear_525_777"
          x1="229.896"
          y1="213.984"
          x2="454.032"
          y2="329.519"
          gradientUnits="userSpaceOnUse"
        >
          <stop stopColor="white" stopOpacity="0.4" />
          <stop offset="0.4" stopColor="white" stopOpacity="0.01" />
          <stop offset="0.6" stopColor="white" stopOpacity="0.01" />
        </linearGradient>
        <clipPath id="clip0_525_777">
          <rect
            width="568"
            height="356"
            fill="white"
            transform="translate(0 -0.00335693)"
          />
        </clipPath>
      </defs>
    </svg>
  );
};

export default Feature3SvgComponent;